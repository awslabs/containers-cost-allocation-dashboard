# The `pipeline` Module

The `pipeline` reusable module is used deploy the pipeline AWS resources for this solution.  

## Variables

The below table lists the `pipeline` module's variables:

| Name                                                                                         | Description                                                                                                              | Type                                                                                                                                                        | Default          | Possible Values                                     | Required |
|----------------------------------------------------------------------------------------------|--------------------------------------------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------------------------------------------------------------------------------|------------------|-----------------------------------------------------|----------|
| <a name="input_glue_database_name"></a> glue\_database\_name                                 | The AWS Glue database name                                                                                               | `string`                                                                                                                                                    | kubecost_db      | A valid AWS Glue database name                      | no       |
| <a name="input_glue_table_name"></a> glue\_table\_name                                       | The AWS Glue table name                                                                                                  | `string`                                                                                                                                                    | kubecost_table   | A valid AWS Glue table name                         | no       |
| <a name="input_glue_view_name"></a> glue\_view\_name                                         | The AWS Glue table name for the Athena view                                                                              | `string`                                                                                                                                                    | kubecost_view    | A valid AWS Glue table name                         | no       |
| <a name="input_glue_crawler_name"></a> glue\_crawler\_name                                   | The AWS Glue crawler name                                                                                                | `string`                                                                                                                                                    | kubecost crawler | A valid AWS Glue crawler name                       | no       |
| <a name="input_glue_crawler_schedule"></a> glue\_crawler\_schedule                           | The schedule for the Glue Crawler, in Cron format. Make sure to set it after the last Kubecost S3 Exporter Cron schedule | `string`                                                                                                                                                    | 0 1 * * ? *      | A valid Cron expression. For example, `0 1 * * ? *` | no       |
| <a name="input_athena_view_data_retention_months"></a> athena\_view\_data\_retention\_months | The amount of months back to keep data in the Athena view                                                                | `string`                                                                                                                                                    | 6                | A non-zero positive integer                         | no       |
| <a name="input_kubecost_ca_certificates_list"></a> kubecost\_ca\_certificates\_list          | A list of objects containing CA certificates paths and their desired secret name in AWS Secrets Manager                  | <pre>list(object({<br>    cert_path = string<br>    cert_secret_name = string<br>    cert_secret_allowed_principals = optional(list(string))<br>  }))</pre> | `[]`             |                                                     | no       |

The below table lists the inputs of the `kubecost_ca_certificates_list` variable:

| Name                                                                                  | Description                                                                         | Type           | Default | Possible Values                         | Required |
|---------------------------------------------------------------------------------------|-------------------------------------------------------------------------------------|----------------|---------|-----------------------------------------|----------|
| <a name="input_cert_path"></a> cert\_path                                             | Local path (including file name) to the CA certificate file                         | `string`       | n/a     | A path                                  | yes      |
| <a name="input_cert_secret_name"></a> cert\_secret\_name                              | The AWS Secrets Manager secret name to be used for the CA certificate               | `string`       | n/a     | A valid AWS Secrets Manager secret name | yes      |
| <a name="input_cert_secret_allowed_principals"></a> cert\_secret\_allowed\_principals | A list of additional principal ARNs to add to the AWS Secrets Manager secret policy | `list(string)` | n/a     | A list of principal ARNs                | no       |